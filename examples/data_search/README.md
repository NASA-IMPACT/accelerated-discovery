# Data Discovery Frontend

A modern, dark-themed web interface for NASA Earth science data discovery using natural language queries.

## Architecture

### Backend (FastAPI + WebSockets)
- **FastAPI**: REST API and WebSocket server
- **Real-time Updates**: Progress streaming via WebSockets
- **Agent Integration**: Direct use of existing CMRDataSearchAgent

### Frontend (React)
- **Dark Theme**: Modern, streamlined interface
- **Real-time UI**: Live progress updates during search
- **Expandable Sections**: Clean organization of workflow steps
- **Responsive Design**: Works on desktop and mobile

## Installation & Setup

### Backend Setup

1. **Install Python dependencies:**
```bash
cd frontend/backend
pip install -r requirements.txt
```

2. **Start the FastAPI server:**
```bash
python main.py
```

The backend will start on `http://localhost:8000`

### Frontend Setup

1. **Install Node.js dependencies:**
```bash
cd frontend/frontend
npm install
```

2. **Start the React development server:**
```bash
npm start
```

The frontend will start on `http://localhost:3000`

## Usage

1. **Enter a scientific query** in natural language, such as:
   - "Find MODIS vegetation data over Amazon rainforest in 2023"
   - "Sea surface temperature measurements from VIIRS satellite"
   - "Land surface temperature data for wildfire research"

2. **Watch the workflow progress** through 7 steps:
   - Document retrieval (currently stubbed)
   - Scientific angles generation
   - CMR query generation
   - Collection search
   - Collection filtering
   - Granule search
   - Results synthesis

3. **Explore results** in expandable sections:
   - **Scientific Angles**: Research perspectives generated by LLM
   - **Search Queries**: CMR search parameters for each angle
   - **Collections**: NASA datasets found
   - **Data Files**: Actual downloadable files with metadata

## Features

### Real-time Progress
- WebSocket connection streams live updates
- Progress bar shows completion percentage
- Each step expands automatically when completed

### Dark Theme UI
- Sleek, modern dark interface
- Color-coded sections and status indicators
- Responsive design for all screen sizes

### Scientific Workflow
- LLM-powered scientific angle generation
- Structured CMR query generation
- Parallel search execution
- Comprehensive result metadata

### Error Handling
- Clear error messages at each step
- Connection status monitoring
- Graceful fallbacks for failures

## API Endpoints

### REST API
- `GET /` - Health check
- `POST /search` - Initiate search (returns search_id)
- `GET /search/{search_id}` - Get search status

### WebSocket
- `WS /ws/{search_id}` - Real-time progress updates

## Project Structure

```
frontend/
├── backend/
│   ├── main.py                 # FastAPI application
│   ├── websocket_handler.py    # WebSocket connection manager
│   ├── search_progress.py      # Progress event handler
│   └── requirements.txt        # Python dependencies
└── frontend/
    ├── public/
    │   └── index.html          # HTML template
    ├── src/
    │   ├── App.js              # Main React component
    │   ├── App.css             # Dark theme styles
    │   └── index.js            # React entry point
    └── package.json            # Node.js dependencies
```

## Development Notes

### Backend Integration
The FastAPI backend imports and uses the existing `CMRDataSearchAgent` from the main codebase. The agent has been modified to accept an optional `progress_handler` that emits events during the workflow.

### WebSocket Communication
Real-time updates are sent as JSON messages with this structure:
```json
{
  "type": "scientific_angles_generated",
  "search_id": "uuid",
  "timestamp": "2023-...",
  "progress": {
    "current_step": 3,
    "total_steps": 7,
    "percentage": 43
  },
  "data": {
    "angles": [...]
  }
}
```

### Frontend State Management
The React app uses hooks for:
- WebSocket connection management
- Search state tracking
- Progress monitoring
- Error handling

## Future Enhancements

1. **Search History**: Save and replay previous searches
2. **Export Features**: Download results as CSV/JSON
3. **Advanced Filters**: Temporal/spatial constraints in UI
4. **Visualization**: Map integration for spatial data
5. **Collaboration**: Share search results with team members
