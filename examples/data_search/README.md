# Data Discovery Frontend

A modern, dark-themed web interface for NASA Earth science data discovery using natural language queries.

## Architecture

### Backend (FastAPI + WebSockets)
- **FastAPI**: REST API and WebSocket server
- **Real-time Updates**: Progress streaming via WebSockets
- **Agent Integration**: Direct use of existing CMRDataSearchAgent

### Frontend (React)
- **Dark Theme**: Modern, streamlined interface
- **Real-time UI**: Live progress updates during search
- **Expandable Sections**: Clean organization of workflow steps
- **Responsive Design**: Works on desktop and mobile

## Installation & Setup

### Option 1: Minimal Dependencies (Recommended for Demo)

Use the targeted dependency set for faster installation:

```bash
# Navigate to data search directory
cd examples/data_search

uv sync

```

### Option 2: Full AKD Framework

For complete framework development:

```bash
# From repository root
cd accelerated-discovery
uv venv --python 3.12
source .venv/bin/activate
uv sync
```

### Backend Setup

1. **Set up environment variables:**
```bash
# Copy example environment file (from repository root)
cp .env.example .env
# Edit .env with your API keys: OPENAI_API_KEY=your-key-here
```

2. **Start the FastAPI server:**
```bash
cd examples/data_search/backend
python main.py
```

The backend will start on `http://localhost:8003`

### Frontend Setup

1. **Install Node.js dependencies:**
```bash
cd frontend/frontend
npm install
```

2. **Start the React development server:**
```bash
npm start
```

The frontend will start on `http://localhost:3000`

## Usage

1. **Enter a scientific query** in natural language, such as:
   - "Find MODIS vegetation data over Amazon rainforest in 2023"
   - "Sea surface temperature measurements from VIIRS satellite"
   - "Land surface temperature data for wildfire research"

2. **Watch the workflow progress** through 7 steps:
   - Document retrieval (currently stubbed)
   - Scientific angles generation
   - CMR query generation
   - Collection search
   - Collection filtering
   - Granule search
   - Results synthesis

3. **Explore results** in expandable sections:
   - **Scientific Angles**: Research perspectives generated by LLM
   - **Search Queries**: CMR search parameters for each angle
   - **Collections**: NASA datasets found
   - **Data Files**: Actual downloadable files with metadata

## Features

### Real-time Progress
- WebSocket connection streams live updates
- Progress bar shows completion percentage
- Each step expands automatically when completed

### Dark Theme UI
- Sleek, modern dark interface
- Color-coded sections and status indicators
- Responsive design for all screen sizes

### Scientific Workflow
- LLM-powered scientific angle generation
- Structured CMR query generation
- Parallel search execution
- Comprehensive result metadata

### Error Handling
- Clear error messages at each step
- Connection status monitoring
- Graceful fallbacks for failures

## API Endpoints

### REST API
- `GET /` - Health check
- `POST /search` - Initiate search (returns search_id)
- `GET /search/{search_id}` - Get search status

### WebSocket
- `WS /ws/{search_id}` - Real-time progress updates

## Project Structure

```
examples/data_search/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ main.py                          # FastAPI application
â”‚   â”œâ”€â”€ websocket_handler.py             # WebSocket connection manager
â”‚   â”œâ”€â”€ search_progress.py               # Progress event handler
â”‚   â””â”€â”€ requirements.txt                 # Original backend dependencies
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â””â”€â”€ index.html                   # HTML template
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.js                       # Main React component
â”‚   â”‚   â”œâ”€â”€ App.css                      # Dark theme styles
â”‚   â”‚   â””â”€â”€ index.js                     # React entry point
â”‚   â””â”€â”€ package.json                     # Node.js dependencies
â”œâ”€â”€ pyproject.toml                       # Minimal dependencies configuration
â”œâ”€â”€ DEPENDENCY_STRATEGY.md               # Dependency reduction documentation
â”œâ”€â”€ README.md                            # This file
â””â”€â”€ STARTUP_GUIDE.md                     # Quick setup reference
```

## Development Notes

### Backend Integration
The FastAPI backend imports and uses the existing `CMRDataSearchAgent` from the main codebase. The agent has been modified to accept an optional `progress_handler` that emits events during the workflow.

### WebSocket Communication
Real-time updates are sent as JSON messages with this structure:
```json
{
  "type": "scientific_angles_generated",
  "search_id": "uuid",
  "timestamp": "2023-...",
  "progress": {
    "current_step": 3,
    "total_steps": 7,
    "percentage": 43
  },
  "data": {
    "angles": [...]
  }
}
```

### Frontend State Management
The React app uses hooks for:
- WebSocket connection management
- Search state tracking
- Progress monitoring
- Error handling

## Dependencies & Installation

### Minimal vs Full Framework

This demo supports two installation options:

**ðŸŽ¯ Minimal (Demo):** 10 core dependencies, ~80MB, 20-second install
- Perfect for demonstrations and focused data search development
- See `pyproject.toml` in this directory

**ðŸ”§ Full Framework:** 20+ dependencies, ~200MB, 60-second install
- Required for literature search, STORM workflows, and full AKD development
- Use main repository `pyproject.toml`

For dependency reduction details, see `DEPENDENCY_STRATEGY.md`.

## Future Enhancements

1. **Search History**: Save and replay previous searches
2. **Export Features**: Download results as CSV/JSON
3. **Advanced Filters**: Temporal/spatial constraints in UI
4. **Visualization**: Map integration for spatial data
5. **Collaboration**: Share search results with team members
